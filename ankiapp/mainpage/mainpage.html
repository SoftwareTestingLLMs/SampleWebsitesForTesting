<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NaturalNets</title>
    <link rel="stylesheet" href="mainpage.css">
</head>

<body onload="loadDecks()">
    <main class="container">
        <button id="add_card">Add Card</button>
        <button id="get_shared" >Get Shared</button>
        <button id="anki_login">Anki Login</button>
        <button id="create_deck">Create Deck</button>
        <button id="delete_deck">Delete Deck</button>
        <button id="import_file">Import File</button>
        <button id="study_now">Study Now</button>
        <div id="deck_row_1"></div>
        <div id="deck_row_2"></div>
        <div id="deck_row_3"></div>
        <div id="deck_row_4"></div>
        <div id="deck_row_5"></div>
        <div id="current_profile"></div>
        <div id="current_deck"></div>
        <div id="current_account"></div>
        <p id="total_reward"></p>
        <div id="current_sum">Total reward sum: </div>
        <label for="dd1_items"></label>
        <select name="dd1" id="dd1">
          <option value="switch_profile">Switch Profile</option>
          <option value="import">Import</option>
          <option value="export">Export</option>
          <option value="exit">Exit</option>
        </select>
        <select name="dd2" id="dd2">
            <option value="edit">Edit</option>
        </select>
        <select name="dd3" id="dd3">
            <option value="study_deck">Study Deck</option>
            <option value="check_media">Check Media</option>
            <option value="preferences">Preferences</option>
        </select>
        <select name="dd4" id="dd4">
            <option value="guide">Guide</option>
            <option value="support">Support</option>
            <option value="about_page">About Page</option>
        </select>
    </main>     
 
    <div id="leadsToExternalWebsitePopup" class="popup">
        <div class="leads-to-external-website-popup-content">
            <h1 style="color:black;">Leads to external website
              </h1>
            <button id="closeLeadsToExternalWebsitePopup">
                  Close
              </button>
        </div>
    </div>
    
    <div id="addCardPopup" class="popup">
        <div class="add-card-popup-content">
            <h1 style="color:black;">Add Card to
            </h1>
            <button id="close_add_card_popup">
                Close
            </button>
            <button id="add_card_button">
                Add Card
            </button>
            <button id="add_card_button_1">
                Front Text
            </button>
            <button id="add_card_button_2">
                Back Text
            </button>
            <button id="add_card_button_3">
                Tag Text
            </button>
            <div id="add_card_row_1"></div>
            <div id="add_card_row_2"></div>
            <div id="add_card_row_3"></div>
        </div>
    </div>

    <div id="createNewDeckPopup" class="popup">
        <div class="create-new-deck-popup-content">
            <h1 style="color:black;">Create new deck
              </h1>
              <div id="create_new_deck"></div>
              <button id="create_new_deck_add_button">
                Add
              <button id="create_new_deck_close_button">
                Close
              </button>
              <button id="create_new_deck_name_button">
                Name
            </button>
        </div>
    </div>

    <div id="deleteDeckPopup" class="popup">
        <div class="delete-deck-popup-content">
            <h1 style="color:black;">Delete deck
              </h1>
              <p><center>Are you sure to delete the current deck ?</center></p>
              <button id="delete_deck_yes_button">
                Yes
              </button>
              <button id="delete_deck_no_button">
                No
            </button>
        </div>
    </div>
    <map name="workmap">
        <area shape="rect" coords="250,370,30,800" total_reward = 0>
        <area shape="rect" coords="282,370,30,800">
        <area shape="rect" coords="314,370,30,800">
        <area shape="rect" coords="346,370,30,800">
        <area shape="rect" coords="378,370,30,800">
    </map>
    <script>

        var ProfileNames = {
	        Alice: "Alice",
	        Bob: "Bob",
	        Carol: "Carol",
	        Dennis: "Dennis",
            Eva: "Eva",
        };

        var DeckNames = {
            DeckName1: "Deck Name 1",
            DeckName2: "Deck Name 2",
            DeckName3: "Deck Name 3",
            DeckName4: "Deck Name 4",
            DeckName5: "Deck Name 5",
        };

        var AccountNames = {
            AccountName1: "Account Name 1",
            AccountName2: "Account Name 2",
            AccountName3: "Account Name 3",
            AccountName4: "Account Name 4",
            AccountName5: "Account Name 5",
        };

        let total_reward = 0
        let add_card_front_counter = 0
        let add_card_back_counter = 0
        let add_card_tag_counter = 0
        let create_deck_index = 0
        let current_profile_index = 0
        let current_deck_index = 0
        let current_account_index = 0
        let current_profiles = [{name: ProfileNames.Alice, decks:[], deck_index: 0}, {name: ProfileNames.Bob, decks:[], deck_index: 0}, {name: ProfileNames.Carol, decks:[], deck_index: 0}]
        let possible_account_names = Object.values(AccountNames)
        let possible_deck_names = Object.values(DeckNames)
        let possible_profiles = Object.values(ProfileNames)

        get_shared.addEventListener("click", function () {
            leadsToExternalWebsitePopup.classList.add("show");
        });

        closeLeadsToExternalWebsitePopup.addEventListener("click", function () {
            leadsToExternalWebsitePopup.classList.remove("show");
        });

        add_card.addEventListener("click", function () {
            addCardPopup.classList.add("show");
        });
        
        close_add_card_popup.addEventListener("click", function () {
            addCardPopup.classList.remove("show");
        });
        
        create_deck.addEventListener("click", function () {
            createNewDeckPopup.classList.add("show");
        });
        
        create_new_deck_close_button.addEventListener("click", function () {
            createNewDeckPopup.classList.remove("show");
        });
        
        delete_deck.addEventListener("click", function () {
            deleteDeckPopup.classList.add("show");
        });
        
        delete_deck_yes_button.addEventListener("click", function () {
            if(current_decks.length == 1){
                return;
            }
            resetDecks();
            current_decks.splice(current_deck_index, 1);
            document.getElementById('current_deck').innerHTML = "Current deck: " + current_decks[0]
            loadDecks();
            deleteDeckPopup.classList.remove("show");
        })

        delete_deck_no_button.addEventListener("click", function () {
            deleteDeckPopup.classList.remove("show");
        });
        
        document.getElementById('total_reward').innerHTML = total_reward;
        document.getElementById('add_card_row_1').innerHTML = "Front Side " + add_card_front_counter;
        document.getElementById('add_card_row_2').innerHTML = "Back Side " + add_card_back_counter;
        document.getElementById('add_card_row_3').innerHTML = "Tag Text " + add_card_tag_counter;        
        document.getElementById('create_new_deck').innerHTML = possible_deck_names[create_deck_index];
        document.getElementById('current_profile').innerHTML = "Current profile: " + current_profiles[current_profile_index].name;
        document.getElementById('current_deck').innerHTML = "Current deck: " + current_decks[current_deck_index];
        document.getElementById('current_account').innerHTML = "Current account: " + possible_account_names[current_account_index];

        function loadDecks() {
            for (let i = 0; i < current_decks.length; i++) {
                document.getElementById('deck_row_' + (i+1).toString()).innerHTML = current_decks[i]
            }
        }

        function resetDecks() {
            for (let i = 0; i < current_decks.length; i++) {
                document.getElementById('deck_row_' + (i+1).toString()).innerHTML = ""
            }
        }

        add_card_button_1.addEventListener("click", function () {
            add_card_front_counter += 1;
            document.getElementById('add_card_row_1').innerHTML = "Front Side " + add_card_front_counter;
        });
        
        add_card_button_2.addEventListener("click", function () {
            add_card_back_counter += 1;
            document.getElementById('add_card_row_2').innerHTML = "Back Side " + add_card_back_counter;
        });
        
        add_card_button_3.addEventListener("click", function () {
            add_card_tag_counter += 1;
            document.getElementById('add_card_row_3').innerHTML = "Tag Text " + add_card_tag_counter;
        });

        create_new_deck_name_button.addEventListener("click", function () {
            create_deck_index += 1;
            create_deck_index %= 5;
            document.getElementById('create_new_deck').innerHTML = possible_deck_names[create_deck_index];
        })
        
        create_new_deck_add_button.addEventListener("click", function () {
            if (current_decks.includes(Object.values(DeckNames)[create_deck_index])){
                return;
            } else {
                current_decks.push(Object.values(DeckNames)[create_deck_index]);
            }
            createNewDeckPopup.classList.remove("show");
            loadDecks()
        })
        
        deck_row_1.addEventListener("click", function () {
            if(0 < current_decks.length) {
                current_deck_index = 0
                document.getElementById('current_deck').innerHTML = "Current deck: " + current_decks[current_deck_index]
            }
        })

        deck_row_2.addEventListener("click", function () {
            if(1 < current_decks.length) {
                current_deck_index = 1
                document.getElementById('current_deck').innerHTML = "Current deck: " + current_decks[current_deck_index]
            }
        })

        deck_row_3.addEventListener("click", function () {
            if(2 < current_decks.length) {
                current_deck_index = 2
                document.getElementById('current_deck').innerHTML = "Current deck: " + current_decks[current_deck_index]
            }
        })

        deck_row_4.addEventListener("click", function () {
            if(3 < current_decks.length) {
                current_deck_index = 3
                document.getElementById('current_deck').innerHTML = "Current deck: " + current_decks[current_deck_index]
            }
        })

        deck_row_5.addEventListener("click", function () {
            if(4 < current_decks.length) {
                current_deck_index = 4
                document.getElementById('current_deck').innerHTML = "Current deck: " + current_decks[current_deck_index]
            }
        })

    </script>
</body>